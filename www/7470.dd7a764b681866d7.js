"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7470],{7470:(I,d,r)=>{r.r(d),r.d(d,{LoginPageModule:()=>E});var m=r(2881),c=r(4341),s=r(9420),p=r(5207),f=r(467),h=r(9350),b=r(7707),t=r(1360),v=r(3393),C=r(4279);function j(e,u){1&e&&(t.j41(0,"ion-text",16)(1,"p",17),t.EFF(2,"Ingresa un correo electr\xf3nico v\xe1lido."),t.k0s()())}function M(e,u){1&e&&(t.j41(0,"ion-text",16)(1,"p",17),t.EFF(2,"Debe ser num\xe9rica de 6 d\xedgitos."),t.k0s()())}const y=[{path:"",component:(()=>{class e{constructor(a,n,o){this.router=a,this.alertController=n,this.dbService=o,this.correo="",this.contrasena=""}isEmailInvalid(){return!this.correo||!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.correo)}isPasswordInvalid(){return!this.contrasena||!/^\d{6}$/.test(this.contrasena)}login(a){var n=this;return(0,f.A)(function*(){if(n.isEmailInvalid()||n.isPasswordInvalid())return void(yield n.presentAlert("\xa1Ups! Debes ingresar datos v\xe1lidos."));if(!(yield function F(e,u){const a="object"==typeof u;return new Promise((n,o)=>{const i=new b.Ms({next:g=>{n(g),i.unsubscribe()},error:o,complete:()=>{a?n(u.defaultValue):o(new h.G)}});e.subscribe(i)})}(n.dbService.getDatabaseState())))return void(yield n.presentAlert("La base de datos no est\xe1 lista. Intenta en unos segundos."));const i=yield n.dbService.validarCredenciales(n.correo.trim(),n.contrasena.trim());i?(localStorage.setItem("usuarioActual",JSON.stringify(i)),document.activeElement?.blur(),n.router.navigate(["/home"])):yield n.presentAlert("Correo o contrase\xf1a incorrectos.")})()}registroUsuario(){console.log("click en registrarse"),this.router.navigate(["/registro-usuario"])}presentAlert(a){var n=this;return(0,f.A)(function*(){yield(yield n.alertController.create({header:"Ocurri\xf3 un error",message:a,buttons:["OK"]})).present()})()}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(v.Ix),t.rXU(s.hG),t.rXU(C.B))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],standalone:!1,decls:29,vars:4,consts:[["form","ngForm"],["translucent",""],["fullscreen","",1,"ion-padding","login-content"],[1,"login-container"],[1,"login-title"],[1,"login-subtitle"],[1,"login-title2"],[3,"ngSubmit"],[1,"input-item"],["position","floating"],["name","correo","required","","type","email",3,"ngModelChange","ngModel"],["color","danger",4,"ngIf"],["name","contrasena","required","","type","password","pattern","\\\\d{6}",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"login-button"],[1,"login-h4"],["expand","block",1,"login-button",3,"click"],["color","danger"],[1,"ion-padding-start"]],template:function(n,o){if(1&n){const i=t.RV6();t.nrm(0,"ion-header",1),t.j41(1,"ion-content",2)(2,"div",3)(3,"h1",4),t.EFF(4,"MiMascota"),t.k0s(),t.j41(5,"p",5),t.EFF(6,"La ficha de tu mascota, \xa1ahora digital!"),t.k0s(),t.j41(7,"h2",6),t.EFF(8,"Iniciar Sesi\xf3n"),t.k0s(),t.j41(9,"form",7,0),t.bIt("ngSubmit",function(){t.eBV(i);const l=t.sdS(10);return t.Njj(o.login(l))}),t.j41(11,"ion-item",8)(12,"ion-label",9),t.EFF(13,"Correo Electronico"),t.k0s(),t.j41(14,"ion-input",10),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(o.correo,l)||(o.correo=l),t.Njj(l)}),t.k0s()(),t.DNE(15,j,3,0,"ion-text",11),t.j41(16,"ion-item",8)(17,"ion-label",9),t.EFF(18,"Contrase\xf1a"),t.k0s(),t.j41(19,"ion-input",12),t.mxI("ngModelChange",function(l){return t.eBV(i),t.DH7(o.contrasena,l)||(o.contrasena=l),t.Njj(l)}),t.k0s()(),t.DNE(20,M,3,0,"ion-text",11),t.j41(21,"ion-button",13),t.EFF(22," Ingresar "),t.k0s()(),t.j41(23,"p",5),t.EFF(24,"\xbfOlvidaste tu contrase\xf1a?"),t.k0s(),t.j41(25,"h4",14),t.EFF(26,"\xbfNo tienes una cuenta?"),t.k0s(),t.j41(27,"ion-button",15),t.bIt("click",function(){return t.eBV(i),t.Njj(o.registroUsuario())}),t.EFF(28," Registrate "),t.k0s()()()}if(2&n){const i=t.sdS(10);t.R7$(14),t.R50("ngModel",o.correo),t.R7$(),t.Y8G("ngIf",i.submitted&&o.isEmailInvalid()),t.R7$(4),t.R50("ngModel",o.contrasena),t.R7$(),t.Y8G("ngIf",i.submitted&&o.isPasswordInvalid())}},dependencies:[m.bT,c.qT,c.BC,c.cb,c.YS,c.R_,c.vS,c.cV,s.Jm,s.W9,s.eU,s.$w,s.uz,s.he,s.IO,s.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: url(/assets/fondos/fondo2.jpg)}.login-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]{width:100%;padding:24px;margin-top:5rem;background-color:#fff;border-radius:16px;box-shadow:0 6px 20px #0000001a;text-align:center}.login-title[_ngcontent-%COMP%]{margin-top:0;font-size:35px;font-weight:700;color:#222}.login-h4[_ngcontent-%COMP%]{margin-top:0;font-size:20px;font-weight:700;color:#222}.login-title2[_ngcontent-%COMP%]{margin-top:0;font-size:24px;font-weight:700;color:#222}.login-subtitle[_ngcontent-%COMP%]{margin-bottom:20px;font-size:14px;color:#666}.input-item[_ngcontent-%COMP%]{margin-bottom:16px}.login-button[_ngcontent-%COMP%]{margin-top:20px;border-radius:8px;--background: #5b9dbc;--background-activated: #5b9dbc}"]})}}return e})()}];let P=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[p.iI.forChild(y),p.iI]})}}return e})(),E=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[m.MD,c.YN,s.bv,P]})}}return e})()}}]);